(window._vfP=window._vfP||[]).push([[107,108],{356:function(n,t,e){"use strict";e.r(t);var r,u=e(1),i=e(18),c=e(47),o=e(50);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var f,s=(a(r={},u.ub,(function(n,t){(n[t]||[]).pop()})),a(r,u.a,Object(c.a)(i.default,(function(n,t){return!t.some((function(t){return t.thread_uuid===n.thread_uuid}))}))),a(r,u.G,Object(o.c)(i.default)),a(r,u.Yc,(function(n,t){var e=t.uuid,r=t.mode,u=n[e];u[u.length-1].mode=r})),r),d=e(0);function l(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var _=(l(f={},d.a,(function(n){return function(t){var e=n[t]||[];return e[e.length-1]||{}}})),l(f,d.Gb,(function(n){return function(t){return Boolean(n[t])}})),f),b=e(3);var p,E,v,O=(p={},E=b.a,v=function(n,t){var e=t.thread_uuid,r=t.offset_top,i=t.mode,c=n.getters[d.P](e),o=n.getters[d.S](e);r=n.getters[d.a](o).offset_top||r;var a={key:o,items:[{parent_thread_uuid:c.thread_uuid,content_container_uuid:o,thread_uuid:e,offset_top:r,mode:i}]};n.commit(u.a,a)},E in p?Object.defineProperty(p,E,{value:v,enumerable:!0,configurable:!0,writable:!0}):p[E]=v,p);e.d(t,"REPLY_THREAD_MODES",(function(){return m})),e.d(t,"replyThreads",(function(){return N}));var m={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},D=function(){return{}},N=function(){return{state:D,mutations:s,getters:_,actions:O}}},418:function(n,t,e){"use strict";e.r(t);e(6),e(8),e(4),e(63),e(31),e(34);var r,u=e(1),i=e(60),c=e(50),o=e(814),a=e(283),f=e(18);function s(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var d,l=(s(r={},u.cc,Object(c.f)(f.default,a.c)),s(r,u.wc,(function(n,t){delete t.item.actions,Object(c.f)(f.default,a.c)(n,t)})),s(r,u.Cb,Object(c.c)(f.default)),s(r,u.db,(function(n,t){n[t].isNew=!1})),s(r,u.cb,(function(n,t){n[t].isNew=!0})),s(r,u.fb,(function(n,t){n[t].read=!1})),s(r,u.eb,(function(n,t){n[t].read=!0})),s(r,u.gc,(function(n,t){var e=t.content_uuid,r=t.place;n[e].place=r})),s(r,u.dc,(function(n,t){var e=t.content_uuid,r=t.animation;n[e].animation=Object.values(a.a).includes(r)?r:a.a.NONE})),s(r,u.Z,(function(n,t){n[t].is_picked=!0})),s(r,u.ab,(function(n,t){n[t].is_picked=!1})),s(r,u.Rc,(function(n,t){n[t].state_reasons.push(i.d.CONTENT_MARKED_AS_SPAM)})),s(r,u.bb,(function(n,t){n[t].state=i.c.VISIBLE,n[t].simplified_state=i.c.VISIBLE,n[t].state_reasons=n[t].state_reasons.filter((function(n){return n!==i.d.CONTENT_DISABLED&&n!==i.d.CONTENT_MARKED_AS_SPAM&&n!==i.d.CONTENT_AWAITING_MODERATION}))})),s(r,u.Y,(function(n,t){n[t].simplified_state=i.c.DISABLED,n[t].state_reasons.push(i.d.CONTENT_DISABLED)})),s(r,u.tb,(function(n,t){n[t].is_pinned=!0,n[t].date_pinned=Date.now()})),s(r,u.Xc,(function(n,t){n[t].is_pinned=!1,n[t].date_pinned=void 0})),s(r,u.fc,(function(n,t){var e=t.content_uuid,r=t.simplified_state;n[e].simplified_state=r,n[e].state_reasons.push(i.d.CONTENT_DELETED)})),s(r,u.Wb,(function(n){Object.values(n).forEach((function(n){n.actions=[]}))})),s(r,u.jb,Object(o.b)("total_likes")),s(r,u.X,Object(o.a)("total_likes")),s(r,u.hb,Object(o.b)("total_dislikes")),s(r,u.W,Object(o.a)("total_dislikes")),s(r,u.k,(function(n,t){n[t].actions=n[t].actions.concat("flag")})),s(r,u.K,(function(n,t){n[t].total_flags=0,n[t].actions=n[t].actions.filter((function(n){return"flag"!==n}))})),s(r,u.n,(function(n,t){n[t].actions=n[t].actions.concat("like")})),s(r,u.l,(function(n,t){n[t].actions=n[t].actions.concat("flag"),n[t].total_flags+=1})),s(r,u.ib,Object(o.b)("total_flags")),s(r,u.g,(function(n,t){n[t].actions=n[t].actions.concat("dislike")})),s(r,u.Ob,(function(n,t){n[t].actions=n[t].actions.filter((function(n){return"like"!==n}))})),s(r,u.Db,(function(n,t){n[t].actions=n[t].actions.filter((function(n){return"dislike"!==n}))})),s(r,u.p,(function(n,t){var e=t.parent_uuid,r=t.child_uuid;n[e].reply_uuids.push(r),n[r].parent_uuid=e})),s(r,u.Sb,(function(n,t){var e=t.parent_uuid,r=t.child_uuid;n[e].reply_uuids=n[e].reply_uuids.filter((function(n){return n!==r})),n[r].parent_uuid=""})),s(r,u.kb,(function(n,t){n[t].total_replies+=1,n[t].total_direct_replies+=1})),r),_=(e(132),e(0)),b=e(12),p=e(58);function E(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var v,O,m=function(n,t){return Boolean(n)&&Object(b.F)(t)},D=(E(d={},_.P,(function(n){return function(t){return n[t]}})),E(d,_.O,(function(n,t){return function(e){return Object.values(n).filter((function(n){return n.thread_uuid===e})).filter((function(n){var e=n.content_uuid;return t[_.Kb](e)}))}})),E(d,_.N,(function(n,t){return function(e){return Object.values(n).filter((function(n){return n.parent_uuid===e})).filter((function(n){var e=n.content_uuid;return t[_.Kb](e)}))}})),E(d,_.bb,(function(n,t){return function(e){return n[e].reply_uuids.filter(t[_.Kb]).map(t[_.P]).filter((function(n){return!n.state_reasons.includes(i.d.ACTOR_GHOST_BANNED)})).sort((function(n,t){return n.time-t.time}))}})),E(d,_.t,(function(n,t){return function(e){var r=n[e],u=t[_.dd](r),i=t[_.fb];return Boolean(r)&&function(n){return!n.social_id&&Boolean(n.content)}(r)&&u&&u.uuid===i}})),E(d,_.s,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&r.simplified_state!==i.c.VISIBLE}})),E(d,_.p,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&!r.state_reasons.includes(i.d.CONTENT_DISABLED)}})),E(d,_.u,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&!r.is_pinned&&r.parent_uuid===r.content_container_uuid}})),E(d,_.x,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&r.is_pinned&&r.parent_uuid===r.content_container_uuid}})),E(d,_.o,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&r.total_flags>0}})),E(d,_.q,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&!r.is_picked}})),E(d,_.r,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&r.is_picked}})),E(d,_.w,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&!r.state_reasons.includes(i.d.CONTENT_MARKED_AS_SPAM)}})),E(d,_.y,(function(n,t){return function(e){var r=n[e];return m(r,t[_.eb])&&r.state_reasons.includes(i.d.CONTENT_MARKED_AS_SPAM)}})),E(d,_.v,(function(n,t){return function(e){var r=n[e];return t[_.t](e)&&!r.state_reasons.includes(i.d.CONTENT_DELETED)}})),E(d,_.Y,(function(n){return function(t){return n[t].actions.some((function(n){return"like"===n}))}})),E(d,_.W,(function(n){return function(t){return n[t].actions.some((function(n){return"dislike"===n}))}})),E(d,_.X,(function(n){return function(t){return n[t].actions.some((function(n){return"flag"===n}))}})),E(d,_.V,(function(n){return function(t,e){return n[t].actor_uuid===e}})),E(d,_.U,(function(n,t){return function(n){return t[_.V](n,t[_.fb])}})),E(d,_.Z,(function(n){return function(t){return n[t].is_pinned}})),E(d,_.ab,(function(n){return function(t){return!n[t].is_pinned}})),E(d,_.Kb,(function(n,t){return function(e){var r=n[e];if(!r)return!1;if(Object(b.F)(t[_.eb]))return!0;var u=t[_.Jb];if(Object(p.c)(u)&&u(r.content_container_uuid))return t[_.Nb](r);if(!r.state_reasons.includes(i.d.CONTENT_DELETED)&&t[_.U](r.content_uuid))return!0;var c=t[_.gd](r.actor_uuid),o=r.simplified_state===i.c.DISABLED,a=0===r.total_replies||0===t[_.N](r.content_uuid).length;return!(c&&a||o)&&!r.state_reasons.includes(i.d.CONTENT_AWAITING_MODERATION)}})),E(d,_.Ib,(function(n){return function(t){return n[t].isNew}})),E(d,_.T,(function(n){return function(t,e){return n[t].reply_uuids.includes(e)}})),E(d,_.S,(function(n){return function(t){return n[t].content_container_uuid}})),d),N=(e(40),e(13),e(17),e(32),e(10),e(3)),P=e(9),y=e(133);function T(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function j(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function I(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?j(e,!0).forEach((function(t){A(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):j(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function A(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var g=I({},(T(v={},P.k,(function(n,t){var e=n.state,r=n.getters,u=n.dispatch;if(!e[t.content_uuid])return Promise.resolve();var i=r[_.P](t.content_uuid);return i&&t.payload&&(!i.date_edited&&t.payload.date_edited||i.date_edited<t.payload.date_edited)&&(t.payload.content=i.content,t.payload.is_edited=i.is_edited,t.payload.date_edited=i.date_edited),r[_.Lb](t.actor_uuid)?u(N.gc,t):u(N.jc,t)})),T(v,N.gc,(function(n,t){var e=n.commit,r=t.action,i=t.content_uuid,c=t.payload;switch(r){case y.a.FLAGGED:case y.a.FLAGS_CLEARED:case y.a.PICKED:case y.a.UNPICKED:case y.a.PINNED:case y.a.UNPINNED:case y.a.SPAM:case y.a.DISABLED:case y.a.VISIBLE:e(u.wc,{key:i,item:c})}})),T(v,N.jc,(function(n,t){var e=n.commit,r=t.action,i=t.content_uuid,c=t.payload;switch(r){case y.a.LIKED:e(u.jb,i);break;case y.a.UNLIKED:e(u.X,i);break;case y.a.DISLIKED:e(u.hb,i);break;case y.a.UNDISLIKED:e(u.W,i);break;case y.a.FLAGGED:case y.a.PICKED:case y.a.UNPICKED:case y.a.PINNED:case y.a.UNPINNED:case y.a.DELETED:case y.a.SPAM:case y.a.DISABLED:case y.a.VISIBLE:e(u.wc,{key:i,item:c});break;case y.a.FLAGS_CLEARED:e(u.wc,{key:i,item:c}),e(u.K,i)}})),v),(A(O={},N.Fc,(function(n,t){var e=n.commit,r=Object(a.d)(t),i=r.post;return r.media.forEach((function(n){e(u.qc,n)})),e(u.cc,{key:i.content_uuid,item:i}),Promise.resolve(i)})),A(O,N.Ec,(function(n,t){var e=n.dispatch,r=t.content_container_uuid,u=t.contents,i=u.map((function(n){var t=I({},n,{media:n.media||[],content_container_uuid:r});return e(N.Fc,t).then((function(){return n.content_uuid}))})),c=u.filter((function(n){return n.origin===a.b.USER})).reduce((function(n,t){var e=t.actor_uuid,r=t.content_uuid;return n[e]=r,n}),{});return Promise.all(i).then((function(n){return Promise.all(Object.values(c).map((function(n){return e(N.Ab,n)}))).then((function(){return n}))}))})),A(O,N.ic,(function(n){(0,n.commit)(u.Wb)})),O)),h=e(356);e.d(t,"storeModule",(function(){return S}));var S=function(){return{mutations:l,getters:D,actions:g,state:a.e,modules:{replyThreads:Object(h.replyThreads)()}}}},814:function(n,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"a",(function(){return u}));var r=function(n){return function(t,e){t[e][n]++}},u=function(n){return function(t,e){t[e][n]--}}}}]);