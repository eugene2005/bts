(window._vfP=window._vfP||[]).push([[95],{1394:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var o;return' data-clipboard-text="'+e.escapeExpression("function"==typeof(o=null!=(o=n.shortened_url||(null!=t?t.shortened_url:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"shortened_url",hash:{},data:a,loc:{start:{line:1,column:70},end:{line:1,column:87}}}):o)+'"'},3:function(e,t,n,i,a){var o;return'href="'+e.escapeExpression("function"==typeof(o=null!=(o=n.shortened_url||(null!=t?t.shortened_url:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"shortened_url",hash:{},data:a,loc:{start:{line:1,column:122},end:{line:1,column:139}}}):o)+'"'},5:function(e,t,n,i,a){var o;return'        <h3 class="vf-input-like">\n            <span class="vf-mobile-share-link">\n                '+e.escapeExpression("function"==typeof(o=null!=(o=n.shortened_url||(null!=t?t.shortened_url:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"shortened_url",hash:{},data:a,loc:{start:{line:7,column:16},end:{line:7,column:33}}}):o)+"\n            </span>\n        </h3>\n"},7:function(e,t,n,i,a){return"        <h3>"+e.escapeExpression((n.i18n||t&&t.i18n||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.service:t,{name:"i18n",hash:{},data:a,loc:{start:{line:11,column:12},end:{line:11,column:28}}}))+"</h3>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression;return"<a data-network="+c("function"==typeof(s=null!=(s=n.service||(null!=t?t.service:t))?s:l)?s.call(r,{name:"service",hash:{},data:a,loc:{start:{line:1,column:16},end:{line:1,column:27}}}):s)+(null!=(o=n.if.call(r,null!=t?t.isDesktopLink:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:27},end:{line:1,column:95}}}))?o:"")+" "+(null!=(o=n.if.call(r,null!=t?t.isMobileLink:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:96},end:{line:1,column:147}}}))?o:"")+'>\n    <span class="vf-share-icon"></span>\n    <span class="vf-share-meta">\n'+(null!=(o=n.if.call(r,null!=t?t.isMobileLink:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a,loc:{start:{line:4,column:0},end:{line:12,column:7}}}))?o:"")+'        <h5 class="vf-share-count">\n            <span>\n                '+c("function"==typeof(s=null!=(s=n.count||(null!=t?t.count:t))?s:l)?s.call(r,{name:"count",hash:{},data:a,loc:{start:{line:15,column:16},end:{line:15,column:25}}}):s)+"\n            </span>\n        </h5>\n    </span>\n</a>\n"},useData:!0})},1395:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression;return'<li class="vf-total-share-count">\n    <h4 class="vf-total-share-label">\n        <span class="total">\n            <span>\n                '+l("function"==typeof(o=null!=(o=n.totalShares||(null!=t?t.totalShares:t))?o:r)?o.call(s,{name:"totalShares",hash:{},data:a,loc:{start:{line:5,column:16},end:{line:5,column:31}}}):o)+'\n            </span>\n        </span>\n        <span class="label">\n            '+l((n.i18n||t&&t.i18n||r).call(s,"share_s",null!=t?t.totalShares:t,{name:"i18n",hash:{},data:a,loc:{start:{line:9,column:12},end:{line:9,column:42}}}))+"\n        </span>\n    </h4>\n</li>\n"},useData:!0})},1396:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return' class="pulse" '},3:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression;return'            <button id="vf-send-again" autofocus>\n                '+r((n.i18n||t&&t.i18n||s).call(o,"send_again",{name:"i18n",hash:{},data:a,loc:{start:{line:23,column:16},end:{line:23,column:37}}}))+'\n            </button>\n            <button id="vf-back-to-article">\n                '+r((n.i18n||t&&t.i18n||s).call(o,"back_to_article",{name:"i18n",hash:{},data:a,loc:{start:{line:26,column:16},end:{line:26,column:42}}}))+"\n            </button>\n"},5:function(e,t,n,i,a){return'            <button id="vf-try-again" autofocus>\n                '+e.escapeExpression((n.i18n||t&&t.i18n||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"try_again",{name:"i18n",hash:{},data:a,loc:{start:{line:31,column:16},end:{line:31,column:36}}}))+"\n            </button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing;return'\n    <div class="vf-send-state-wrapper">\n        <div class="vf-send-state-graphic">\n            <svg '+(null!=(o=(n.isEqual||t&&t.isEqual||r).call(s,null!=t?t.status:t,"sending",{name:"isEqual",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:17},end:{line:4,column:73}}}))?o:"")+' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 126.6 126.1" enable-background="new 0 0 126.6 126.1" xml:space="preserve">\n            <g>\n                <path fill="#6FA252" d="M3.6,57.1c0,0-2.4-1.8,0-2.8S121.9,2.5,121.9,2.5s3.3-1.1,2.5,2.2S95,122.3,95,122.3s-1,2.8-3.5,1\n                c-2.5-1.9-48.9-36.1-48.9-36.1s-2.5-0.8-0.1-3.2c2.3-2.3,55.4-55.4,55.4-55.4s1.1-2.3-1.5-0.7S32.2,75.2,32.2,75.2\n                s-2.1,1.5-4.1,0.1S3.6,57.1,3.6,57.1z"/>\n                <path fill="#6FA252" d="M37.2,119.5c0,0,0.5,3.8,2.9,1.4c2.3-2.3,17.8-17.6,17.8-17.6s2.2-1-1.3-3.5C53,97.2,39.1,87.1,39.1,87.1\n                s-1.9-1.6-1.9,2.3S37.2,119.5,37.2,119.5z"/>\n                <path fill="#6FA252" d="M13.2,123.7"/>\n                <path fill="#6FA252" d="M35,84.4l-3.5-4.2c-0.4-0.6-0.8-1-1-1.2c-0.7-0.2-0.7,0.6-0.7,0.6L32,115c0,0,1.2,3.2,3.2-0.1V89v-1.9\n                c0-0.8,0-1.7,0-1.9C35.2,84.7,35,84.4,35,84.4z"/>\n            </g>\n        </svg>\n\n        </div>\n        <p class="status">'+e.escapeExpression((n.i18n||t&&t.i18n||r).call(s,null!=t?t.message:t,{name:"i18n",hash:{},data:a,loc:{start:{line:19,column:26},end:{line:19,column:42}}}))+'</p>\n        <div class="vf-share-email-options">\n'+(null!=(o=(n.isEqual||t&&t.isEqual||r).call(s,null!=t?t.status:t,"success",{name:"isEqual",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:21,column:12},end:{line:28,column:24}}}))?o:"")+(null!=(o=(n.isEqual||t&&t.isEqual||r).call(s,null!=t?t.status:t,"failed",{name:"isEqual",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:29,column:12},end:{line:33,column:24}}}))?o:"")+"        </div>\n    </div>\n"},useData:!0})},1397:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression;return'<div class="vf-total-share-count">\n    <h4 class="vf-total-share-label"><span class="total">'+l("function"==typeof(o=null!=(o=n.totalShares||(null!=t?t.totalShares:t))?o:r)?o.call(s,{name:"totalShares",hash:{},data:a,loc:{start:{line:3,column:57},end:{line:3,column:72}}}):o)+'</span>\n        <span class="label">\n            '+l((n.i18n||t&&t.i18n||r).call(s,"share_s",null!=t?t.totalShares:t,{name:"i18n",hash:{},data:a,loc:{start:{line:5,column:12},end:{line:5,column:42}}}))+'\n        </span>\n    </h4>\n</div>\n<ul class="vf-share-bar vf-scrollable-menu"></ul>\n'},3:function(e,t,n,i,a){return'<div class="vf-share-bar">\n    <ul></ul>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o;return null!=(o=(n.isEqual||t&&t.isEqual||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.style:t,"mobileModal",{name:"isEqual",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:1,column:0},end:{line:14,column:12}}}))?o:""},useData:!0})},1398:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<button class="vf-share-show-more">\n    <span class="vf-more-icon">\n    </span>\n</button>\n'},useData:!0})},1399:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var o;return"data-invalid-email="+e.escapeExpression("function"==typeof(o=null!=(o=n.value||(null!=t?t.value:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"value",hash:{},data:a,loc:{start:{line:1,column:81},end:{line:1,column:90}}}):o)+" "},3:function(e,t,n,i,a){var o;return'<span class="invalid-email">'+e.escapeExpression("function"==typeof(o=null!=(o=n.value||(null!=t?t.value:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"value",hash:{},data:a,loc:{start:{line:2,column:71},end:{line:2,column:80}}}):o)+" </span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing;return'<li class="error-message" '+(null!=(o=(n.isEqual||t&&t.isEqual||r).call(s,null!=t?t.message:t,"invalid_email",{name:"isEqual",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:26},end:{line:1,column:103}}}))?o:"")+">\n    <p>"+(null!=(o=(n.isEqual||t&&t.isEqual||r).call(s,null!=t?t.message:t,"invalid_email",{name:"isEqual",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:7},end:{line:2,column:100}}}))?o:"")+"\n    "+e.escapeExpression((n.i18n||t&&t.i18n||r).call(s,null!=t?t.message:t,{name:"i18n",hash:{},data:a,loc:{start:{line:3,column:4},end:{line:3,column:20}}}))+"</p>\n</li>\n"},useData:!0})},1400:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o;return'<span class="vf-total-shares">'+e.escapeExpression("function"==typeof(o=null!=(o=n.count||(null!=t?t.count:t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"count",hash:{},data:a,loc:{start:{line:1,column:30},end:{line:1,column:39}}}):o)+"</span>\n"},useData:!0})},1401:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression;return'<h2>Share this Article</h2>\n<form id="vf-share-email">\n    <ul class="error-messages" id="from-field-errors">\n    </ul>\n    <fieldset>\n        <span class="required">'+l((n.i18n||t&&t.i18n||r).call(s,"required_field",{name:"i18n",hash:{},data:a,loc:{start:{line:6,column:31},end:{line:6,column:56}}}))+'</span>\n        <label for="vf-share-email-from" id="sender-label">'+l((n.i18n||t&&t.i18n||r).call(s,"from_field",{name:"i18n",hash:{},data:a,loc:{start:{line:7,column:59},end:{line:7,column:80}}}))+'</label>\n        <input name="from" id="vf-share-email-from" type="email" class="required-field" required aria-labelledby="sender-label" required/>\n    </fieldset>\n    <ul class="error-messages" id="to-field-errors">\n    </ul>\n    <fieldset>\n        <span class="required">'+l((n.i18n||t&&t.i18n||r).call(s,"required_field",{name:"i18n",hash:{},data:a,loc:{start:{line:13,column:31},end:{line:13,column:56}}}))+'</span>\n        <label for="vf-share-email-to" id="recipients-label">'+l((n.i18n||t&&t.i18n||r).call(s,"to_field",{name:"i18n",hash:{},data:a,loc:{start:{line:14,column:61},end:{line:14,column:80}}}))+'</label>\n        <div class="autoresize" id="autoresize-recipients"></div>\n        <textarea name="to" id="vf-share-email-to" type="text" class="required-field" required aria-labelledby="recipients-label" aria-describedby="recipients-field-desc" required></textarea>\n        <p id="recipients-field-desc">\n            '+l((n.i18n||t&&t.i18n||r).call(s,"to_field_desc",{name:"i18n",hash:{},data:a,loc:{start:{line:18,column:12},end:{line:18,column:36}}}))+'\n        </p>\n    </fieldset>\n        <section class="vf-share-preview">\n            <h3>'+l((n.i18n||t&&t.i18n||r).call(s,"preview",{name:"i18n",hash:{},data:a,loc:{start:{line:22,column:16},end:{line:22,column:34}}}))+'</h3>\n        <p>\n            <span id="senderName">'+l((n.i18n||t&&t.i18n||r).call(s,"default_sender",{name:"i18n",hash:{},data:a,loc:{start:{line:24,column:34},end:{line:24,column:59}}}))+"</span>"+l((n.i18n||t&&t.i18n||r).call(s,"email_message",null!=t?t.siteName:t,{name:"i18n",hash:{},data:a,loc:{start:{line:24,column:66},end:{line:24,column:99}}}))+"\n        </p>\n        <article>\n            <h4>"+l("function"==typeof(o=null!=(o=n.currentPageTitle||(null!=t?t.currentPageTitle:t))?o:r)?o.call(s,{name:"currentPageTitle",hash:{},data:a,loc:{start:{line:27,column:16},end:{line:27,column:36}}}):o)+'</h4>\n            <p class="description">\n                '+l("function"==typeof(o=null!=(o=n.description||(null!=t?t.description:t))?o:r)?o.call(s,{name:"description",hash:{},data:a,loc:{start:{line:29,column:16},end:{line:29,column:31}}}):o)+'\n            </p>\n        </article>\n    </section>\n    <fieldset class="submit">\n        <div class="vf-share-email-submit-row">\n            <div id="vf-share-email-g-recaptcha-submit"></div>\n            <input class="send" value='+l((n.i18n||t&&t.i18n||r).call(s,"send",{name:"i18n",hash:{},data:a,loc:{start:{line:36,column:38},end:{line:36,column:53}}}))+' type="submit" name="send"></input>\n        </div>\n    </fieldset>\n</form>\n<div class="vf-send-state" role="dialogue" aria-hidden="true"></div>\n'},useData:!0})},1402:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'    <div class="vf-share-dropdown">\n        <div class="vf-share-bar">\n            <ul>\n\n            </ul>\n        </div>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression;return'<div class="vf-share-button" tabindex=0 data-show-total='+c("function"==typeof(s=null!=(s=n.showTotal||(null!=t?t.showTotal:t))?s:l)?s.call(r,{name:"showTotal",hash:{},data:a,loc:{start:{line:1,column:56},end:{line:1,column:69}}}):s)+' >\n        <a class="vf-share-button-icon"></a>"\n        <div class="vf-total-share-count">\n            <h4 class="vf-total-share-label">\n                <span class="total">\n                    '+c("function"==typeof(s=null!=(s=n.totalShares||(null!=t?t.totalShares:t))?s:l)?s.call(r,{name:"totalShares",hash:{},data:a,loc:{start:{line:6,column:20},end:{line:6,column:35}}}):s)+'\n                </span>\n                <span class="label">\n                    '+c((n.i18n||t&&t.i18n||l).call(r,"share_s",null!=t?t.totalShares:t,{name:"i18n",hash:{},data:a,loc:{start:{line:9,column:20},end:{line:9,column:50}}}))+"\n                </span>\n            </h4>\n        </div>\n"+(null!=(o=(n.isEqual||t&&t.isEqual||l).call(r,null!=t?t.enableMobile:t,!1,{name:"isEqual",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:13,column:4},end:{line:21,column:16}}}))?o:"")+"</div>\n"},useData:!0})},1403:function(e,t,n){var i=n(425);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression;return'<div class="vf-share-link-tip" style="display:none">\n    <div class="vf-tip-triangle"></div>\n    <div class="vf-tip-content">\n        <div>\n            <span>'+l((n.i18n||t&&t.i18n||r).call(s,"copied_link",{name:"i18n",hash:{},data:a,loc:{start:{line:5,column:18},end:{line:5,column:40}}}))+'</span>\n            <span class="vf-shared-link">'+l("function"==typeof(o=null!=(o=n.shortened_url||(null!=t?t.shortened_url:t))?o:r)?o.call(s,{name:"shortened_url",hash:{},data:a,loc:{start:{line:6,column:41},end:{line:6,column:58}}}):o)+"</span>\n        </div>\n    </div>\n</div>\n"},useData:!0})},1404:function(e,t,n){},1452:function(e,t,n){"use strict";n.r(t);n(10),n(23),n(4),n(80),n(138),n(87),n(26),n(13),n(6),n(8),n(108);var i=n(480),a=n.n(i),o=n(1394),s=n.n(o),r=n(1395),l=n.n(r),c=n(1396),u=n.n(c),h=n(1397),d=n.n(h),f=n(1398),p=n.n(f),m=n(1399),v=n.n(m),g=n(1400),b=n.n(g),w=n(1401),y=n.n(w),k=n(1402),_=n.n(k),S=n(1403),C=n.n(S);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var E={network:s.a,total_count:l.a,email_states:u.a,sharebar:d.a,sharebar_show_more:p.a,error_message:v.a,share_total:b.a,email_modal:y.a,dropdown:_.a,link_tip:C.a};a.a.templates=a.a.templates||{},Object.entries(E).forEach((function(e){var t=x(e,2),n=t[0],i=t[1];a.a.templates[n]=i}));n(1404);var M=n(20),$=n(441),T=n(424),I=n(429),L=n.n(I),A=n(0),O=n(120),N=n(430),R=n(436),F=n(431),j=n(542),P=n(478),U=n(911),q=$.a.Collection.extend({service:function(){return""},url:function(){return""},getRoute:function(e,t){return N.a.argsResult(this,"url",e,t)},parse:function(e){return e.results||e},sync:function(e,t,n){T.default.defaults(n,{batch:!0});var i,a=n.data||{},o=this.getRoute(n);"read"===e?i="get":"create"===e?i="post":"delete"===e?i="delete":"update"===e&&(i="put");var s=N.a.argsResult(this,"service",e,n);F.a.V3APIs.get(s).request(i,o,a,n)},multiFetch:function(e){return new U.a(this,e)}}),z=(n(278),$.a.Model.extend({service:function(){return""},url:function(){return""},parse:function(e){return e.results||e.result||e.responses&&e.responses[1].results&&e.responses[1].results[0]&&e.responses[1].results[0].count||e},initialize:function(e,t){t=t||{},this.domainSettings=t.domainSettings||F.a.current.settings},getRoute:function(e,t){return N.a.argsResult(this,"url",e,t)},toJSON:function(e){var t=this;if(T.default.isArray(e)){var n={};return T.default.each(e,(function(e){n[e]=$.a.Model.prototype.get.call(t,e)})),n}return $.a.Model.prototype.toJSON.call(this,e)},fetch:function(e,t){return t.data=T.default.extend({},e,t.data),$.a.Model.prototype.fetch.call(this,t)},save:function(e,t){var n=this,i="",a=(t=t||{}).success;return t.data=e,t.success=function(e,t){n.set(n.parse(e)),a&&a(e,t)},i=this.isNew()?"create":"update",this.sync(i,e,t)},sync:function(e,t,n){var i={};T.default.defaults(n,{batch:!0}),n.params&&T.default.extend(i,this.toJSON());var a,o=this.getRoute(n);"read"===e?a="get":"create"===e?(T.default.extend(i,t),a="post"):"delete"===e?a="delete":"update"===e&&(T.default.extend(i,t),a="patch");var s=N.a.argsResult(this,"service",e,n);F.a.V3APIs.get(s).request(a,o,i,n)}})),D=n(43),V=n(5),H=z.extend({service:"content",url:"/tinycode/register",idAttribute:"service",siteName:M.a.redirector_url||"http://vf.to/",defaults:{count:0,dropdown:!1},initialize:function(){z.prototype.initialize.apply(this,arguments),this.get("shortened_url")||this.set("shortened_url",this.get("shared_url")||Object(D.b)(window.location.protocol,window.location.host,{queryParams:{__vfz:"medium=comment_share"}})),this.set("share_network","share_".concat(this.get("service"))),this.set("count",this.get("count")||0),this.isShortURLSet=!1},parse:function(e){return(e=z.prototype.parse.call(this,e)).shortened_url&&(e.shortened_url=this.get("shared_url"),this.isShortURLSet=!0),e},isNew:function(){return!0},getShareLink:function(e){return e=e||{},this.networkLinks[this.get("service")].call(this,e)},prefetchShare:function(e,t){(e=e||{}).prefetch=!0,this.saveShare(e,t)},saveShare:function(e,t){t=t||{};var n,i=this.toJSON(["section_uuid","shared_url","content_uuid","page_uuid","shared_user_uuid","service","content_type"]),a=V.vuexStore.getInstance();n=window.viafoura.$can("save_share","user",F.a.current.user.toJSON())?a.getters[A.fb]:N.a.toUuid(0),e=T.default.defaults({},e,i,{shared_url:window.location.href+window.location.hash,sharer_user_uuid:n,page_uuid:this.get("content_uuid"),shared_user_uuid:N.a.toUuid(0),prefetch:!1}),this.save(e,t)},incrementCount:function(){this.set("count",this.get("count")+1)},twitterText:function(e){var t=e.url,n=e.hashtags,i=e.via.replace(/@/g,"");if(e.title){t=" ".concat(t);var a=i?i.length+6:0,o=n?n.length+2:0,s=e.title.normalize?e.title.normalize("NFC"):e.title,r=s.length,l=r+24+a+o-280;l>0&&(e.title="".concat(s.substring(0,r-l-1),"…")),t=e.title+t}return t},networkLinks:{facebook:function(e){return"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e.url))},twitter:function(e){var t=e.related?"&related=".concat(encodeURIComponent(e.related.replace(/@/g,""))):"",n=e.via?"&via=".concat(encodeURIComponent(e.via.replace(/@/g,""))):"",i=e.hashtags?"&hashtags=".concat(encodeURIComponent(e.hashtags)):"",a=encodeURIComponent(this.twitterText(e));return"https://twitter.com/intent/tweet?".concat(t).concat(n,"&text=").concat(a).concat(i)},"google-plus":function(e){return"https://plus.google.com/share?url=".concat(encodeURIComponent(e.url))},whatsapp:function(e){var t=e.title||"";return"whatsapp://send?text=".concat(encodeURIComponent("".concat(t," ").concat(e.url)))},email:function(e){var t=P.a.getInstance().translate("email_subject",e.user,e.siteName);return"mailto:?subject=".concat(encodeURIComponent(e.title),"&body=").concat(encodeURIComponent(t)).concat(encodeURIComponent("\n".concat(e.url)))},linkedin:function(e){var t=e.title?"&title=".concat(encodeURIComponent(e.title)):"",n=e.description?"&summary=".concat(encodeURIComponent(e.description)):"",i=e.siteName?"&source=".concat(encodeURIComponent(e.siteName)):"";return"https://www.linkedin.com/shareArticle?&mini=true&url=".concat(encodeURIComponent(e.url)).concat(t).concat(n).concat(i)},pinterest:function(e){var t=e.media?"&media=".concat(encodeURIComponent(e.media)):"",n=e.title?"&description=".concat(encodeURIComponent(e.title)):"";return"http://pinterest.com/pin/create/button/?&url=".concat(encodeURIComponent(e.url)).concat(t).concat(n)},reddit:function(e){var t=e.title?"&title=".concat(encodeURIComponent(e.title)):"";return"http://www.reddit.com/submit?url=".concat(encodeURIComponent(e.url)).concat(t)},stumbleupon:function(e){return"http://www.stumbleupon.com/submit?url=".concat(encodeURIComponent(e.url))}}}),B=q.extend({model:H,url:"/tinycode/metrics",service:"content",fetchNumShares:function(e,t){t=T.default.defaults(t||{},{remove:!1,add:!1}),e.service||(e.service=this.getServices().join(",")),t.data=e,this.fetch(t)},getServices:function(){return T.default.map(this.models,(function(e){return e.get("service")}))}}),J=n(460),W=(n(91),n(618)),Y=n.n(W),G=n(426),X=(n(100),n(86),n(913)),K=n(688),Q=z.extend({service:"content",url:"/tinycode/email",defaults:{template:"sharedemail",send_status:null,to:[],section_uuid:"",data:{user_name:""},fetch:{page:{},site:{}}},initialize:function(){z.prototype.initialize.apply(this,arguments),T.default.bindAll(this,"send","onSuccess","onError")},send:function(){var e={},t=this.attributes;e.data=t,e.params=!0,e.success=this.onSuccess,e.error=this.onError,this.set("send_status","sending"),this.save(t,e)},onSuccess:function(){this.set("send_status","success")},onError:function(){this.set("send_status","failed")}}),Z=G.a.extend({templateName:"email_states",events:{"click #vf-send-again":"sendAgain","click #vf-back-to-article":"closeModal","click #vf-try-again":"resend"},initialize:function(){T.default.bindAll(this,"render","sendAgain","resend")},render:function(){var e=this.model.get("send_status");return this.$el.html(this.template({status:e,message:"email_".concat(e)})),this},sendAgain:function(){L()(".vf-send-state").hide(),L()("#vf-share-email-to").val(""),L()("#vf-share-email-to")[0].focus(),L()(".error-messages").empty().hide(),L()(".error").removeClass("error")},resend:function(){this.model.send()},closeModal:function(){return R.a.trigger("/modal/close")}}),ee=G.a.extend({templateName:"email_modal",events:{"mousedown .send":"onSubmit","click .send":"onSubmit","keydown .send":"onSubmit","keydown #vf-share-email-to":"autoResize","focus #vf-share-email-from":"setNewFocus","focus #vf-share-email-to":"setNewFocus"},initialize:function(){T.default.bindAll(this,"render","afterRender","sendEmail","onSubmit","validateOnBlur","validateForm","validateField","getInvalidEmails","displayInvalidEmails","autoResize","resetModal","removeSubview"),this.sharedEmail=new Q,this.throttledIncrement=T.default.debounce(function(){this.model.incrementCount(),this.model.trigger("network:share",this.model.get("service"))}.bind(this),2e3,{leading:!0,trailing:!1}),this.listenTo(this.sharedEmail,"change:send_status",this.onStatusChange)},render:function(){var e={sender:this.currentUser.get("username"),currentPageTitle:this.currentPage.get("title"),description:this.currentPage.get("description"),site:this.locations.domain,siteName:this.domainSettings.get("sharebar_site_name"),image_url:this.currentPage.get("image_url")};return this.$el.html(this.template(e)),this.inFocus={prev:null,current:null},setTimeout(this.afterRender,10),this},afterRender:function(){if(this.$fields={from:L()("#vf-share-email-from"),to:L()("#vf-share-email-to")},this.$errors={from:L()("#from-field-errors"),to:L()("#to-field-errors")},this.initAutoResize(),K.a.load("vf-share-email-g-recaptcha-submit",this.sendEmail,!0),"true"===L()("#modal-open").attr("data-keypress")){var e=document.getElementsByClassName("vf-modal-close")[0];e.tabIndex=-1,e.focus()}this.resetModal()},initAutoResize:function(){var e=this.$fields.to;e.attr("data-min-height",e[0].offsetHeight)},setNewFocus:function(e){var t=this.inFocus.current,n=e.currentTarget.name;n&&t&&n!==t&&this.validateOnBlur(t),this.inFocus.prev=t,this.inFocus.current=n},getPostDate:function(){return new Date(1e3*this.currentPage.get("date_created")).toLocaleDateString(window.navigator.language,{month:"long",day:"numeric",year:"numeric"})},sendEmail:function(e){var t=this.separateEmails(this.$fields.to.val()),n={page:{type:"page",uuid:this.model.get("page_uuid")},site:{type:"site",uuid:this.domainSettings.get("site_uuid")}},i={share_url:this.model.get("shared_url"),user_name:this.$fields.from.val()};this.sharedEmail.set({section_uuid:this.model.get("section_uuid"),to:t,fetch:n,data:i,"g-recaptcha-response":e}),this.sharedEmail.send()},displaySubview:function(){L()(".vf-send-state-wrapper").remove();var e=new Z({model:this.sharedEmail}).render();L()(".vf-send-state").show().append(e.$el)},removeSubview:function(){return L()(".vf-send-state-wrapper").remove(),L()(".vf-send-state").hide(),this.sharedEmail.set("send_status",null)},resetModal:function(){document.getElementById("vf-share-email").reset(),L()("#senderName").text(this.i18n("default_sender")),this.removeSubview()},onStatusChange:function(){var e=this.sharedEmail.get("send_status");null!==e&&this.displaySubview(),"success"===e&&this.throttledIncrement()},sendToMore:function(){this.$fields.to.val(""),this.removeSubview()},renderErrorMessage:function(e,t){this.removeErrorMessage(t),this.$errors[t].show().append(Object(j.a)("error_message")({message:e})),this.$fields[t].addClass("error")},removeErrorMessage:function(e){this.$errors[e].empty().hide(),this.$fields[e].removeClass("error")},validateOnBlur:function(e){var t=e;return this.validateField(this.$fields[t])},validateForm:function(){return this.validateField(this.$fields.from)&&this.validateField(this.$fields.to)},onSubmit:function(e){e.preventDefault(),"mousedown"!==e.type&&13!==e.which||!this.validateForm()||K.a.execute()},validateField:function(e){var t=e.val(),n=e[0].name;if(e[0].required&&!X.a.required(t))return this.renderErrorMessage("missing_".concat(n,"_email"),n),!1;if(t.length>0){var i=this.getInvalidEmails(e);return i.length>0?(this.displayInvalidEmails(i,n),!1):("from"===n&&this.updateSenderName(t),this.removeErrorMessage(n),!0)}return!1},getInvalidEmails:function(e){var t=e.val(),n=e[0].name,i=[];if("to"===n)for(var a,o=this.separateEmails(t),s=0;s<o.length;s++)(a=o[s]).length>0&&!X.a.email(a)&&i.push(a);else"from"===n&&t.length>0&&!X.a.email(t)&&i.push(t);return i},separateEmails:function(e){return e.trim().split(/[,;\s]+/gi)},displayInvalidEmails:function(e,t){this.removeErrorMessage(t),this.$fields[t].addClass("error");for(var n=0;n<e.length;n++)this.$errors[t].show().append(Object(j.a)("error_message")({message:"invalid_email",value:e[n]}))},updateSenderName:function(e){L()("#senderName").text(e)},autoResize:function(e){var t=this.$fields.to,n=this.parseHeightData(t),i=this.setHeight(n,e.keyCode);t[0].style.height="".concat(i.toString(),"px"),t.scrollTop(0)},parseHeightData:function(e){var t={original:parseInt(e.attr("data-min-height"),10),scroll:e[0].scrollHeight,current:parseInt(e[0].style.height,10),line:parseInt(e.css("line-height"),10)};return isFinite(t.current)||(t.current=t.original),t},setHeight:function(e,t){var n,i=e.original,a=e.scroll,o=e.current;if(0===a||a<=i)return i;if(8===t||46===t){if(a===o)return o;n=o-e.line}else n=13===t?a+e.line:a;return n<=i?i:n}}),te=n(482),ne=G.a.extend({events:{"click .vf-mobile-share-link":"onClickMobileLink","click a":"shareOnClick"},defaults:{style:"desktop"},templateName:"network",tagName:"li",className:"vf-share-option",mixins:[te.a],rollerFormatter:N.a.shortenCounts,initialize:function(e){var t=this;T.default.defaults(this.options,e||{}),this.height=350,this.width=550,this.page=e.page,this.prefetchCode((function(){return t.postModalLoad()})),"reddit"===this.model.get("service")&&(this.height=500,this.width=850),T.default.bindAll(this,"render","openEmailModal","openShareLink","throttleFetchCode"),this.throttledFetchCode=this.throttleFetchCode(2e3),this.throttledIncrement=T.default.debounce((function(){t.model.incrementCount(),t.model.trigger("network:share",t.model.get("service"))}),2e3,{leading:!0,trailing:!1}),this.listenTo(this.model,"change:shortened_url",(function(){t.$(".vf-input-like a").attr("href",t.model.get("shortened_url")).html(t.model.get("shortened_url"))})),this.$el.attr("tabindex",0),this.$el.keypress((function(e){13===e.which&&t.shareOnClick(e)})),this.listenTo(this.model,"sharebar-remove",(function(){return t.remove()}))},render:function(){var e=this,t=this.model.toJSON();return t.isMobileLink=this.isMobileLink(),t.isDesktopLink=!this.isMobileLink()&&this.isLink(),this.$el.html(this.template(t)),"mobileModal"===this.options.style&&this.$el.find("h3,.vf-input-like").before(this.$el.find("h5")),this.isLink()&&(N.a.addTapholdListener(this.$el,this.onClipboardCopy.bind(this),1e3),this.$el.on("touchstart",(function(t){t.stopPropagation(),e.$el.css("outline","none"),e.$(".vf-share-icon").css("background","#f3a63f"),e.$(".vf-share-count").css("color","#838383")})),this.$el.mouseout(this.hideLinkTip.bind(this))),this.rollCounters={count:{el:".vf-share-count span",prop:"count"}},this.initializeAnimation(),this.options.showCounters&&(this.$("a").attr("title",P.a.getInstance().translate("share_count",this.model.get("count"))),this.listenTo(this.model,"change:count",(function(){e.$("a").attr("title",P.a.getInstance().translate("share_count",e.model.get("count")))}))),new Y.a(this.$("a")[0]).on("success",this.showLinkTip.bind(this)),this},shareOnClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.e;switch(e.stopPropagation(),e.preventDefault(),this.model.get("service")){case"link":break;case"email":t?this.throttledFetchCode(this.openShareLink):(this.$el.find("a[data-network=email]").parent().attr("id","modal-open"),13===e.keyCode&&L()("#modal-open").attr("data-keypress","true"),this.throttledFetchCode(this.openEmailModal));break;default:this.throttledFetchCode(this.openShareLink)}return R.a.trigger("/share/click",this.model.get("service"),this.$el),!1},prefetchCode:function(e){this.fetchCode({prefetch:!0},{success:e,error:e})},fetchCode:function(e,t){this.model.saveShare(e,t)},fetchCodeError:function(){},openShareLink:function(){this.throttledIncrement();var e={url:this.model.get("shortened_url"),title:this.page.get("title"),description:this.page.get("description"),media:this.page.get("image_url"),user:F.a.current.user.get("name"),siteName:this.domainSettings.get("sharebar_site_name")};"twitter"===this.model.get("service")&&(e.related=this.domainSettings.get("sharebar_twitter_related"),e.via=this.domainSettings.get("sharebar_twitter_via"),e.hashtags=this.domainSettings.get("sharebar_twitter_hashtag")),"email"===this.model.get("service")?window.open(this.model.getShareLink(e),"_self"):window.open(this.model.getShareLink(e),this.model.get("service").replace("-",""),"status = 1, height = ".concat(this.height,", width = ").concat(this.width,", resizable = 0"))},openEmailModal:function(){this.emailModal=new ee({model:this.model}),R.a.trigger("/modal/generic",this.emailModal,{style:"desktop",complete:function(){this.postModalLoad.bind(this)}.bind(this)})},showLinkTip:function(){if(!this.$linkTip||this.model.hasChanged("shortened_url")){var e=new URL(this.model.get("shortened_url"));this.$linkTip=L()(Object(j.a)("link_tip")({shortened_url:e.origin+e.pathname})),this.$el.find("a").append(this.$linkTip)}this.$linkTip.show(),this.onClipboardCopy()},hideLinkTip:function(){this.$linkTip&&this.$linkTip.hide()},remove:function(){G.a.prototype.remove.apply(this,arguments)},onClipboardCopy:function(){this.$(".vf-share-icon").css("background",""),this.$(".vf-share-count").css("color",""),this.throttledIncrement(),this.throttledFetchCode()},onClickMobileLink:function(){return!1},postModalLoad:function(){this.linkModal&&this.linkModal.$("input").select(),this.options.enableMobile||this.$(".vf-mobile-share-link").select()},throttleFetchCode:function(e){var t=this,n=Number(new Date)-e;return function(i){T.default.isFunction(i)&&i();var a=Number(new Date);a-n>=e&&t.fetchCode(),n=a}},isLink:function(){return"link"===this.model.get("service")},isMobileLink:function(){return"mobileModal"===this.options.style&&this.isLink()}}),ie=n(450),ae=n(914),oe=n(11),se=n(7),re=n(161),le=n(2);var ce=G.a.extend({templateName:function(){return this.options.buttonView?"dropdown":"sharebar"},mixins:[te.a,ie.a,ae.a],events:{"click a.vf-share-button-icon":"openShareModal","click .vf-share-show-more":"openShareModal",'click a[data-network="link"]':"openShareModal"},rollerFormatter:N.a.shortenCounts,realtimeFilters:function(){var e,t,n,i="".concat(N.a.toUuid(this.contentId),":page.share");return e={},t=i,n={event_type:["page.share"],page_uuid:[N.a.toUuid(this.contentId)]},t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.default.bindAll(this,"render","addNetwork","createNetworks","postModalLoad"),T.default.defaults(this.options,e,{shareCurrentPageUrl:N.a.stringToBoolean(this.$el.attr("data-share-current-page-url"),!1),showTotal:N.a.stringToBoolean(this.$el.attr("data-show-total"),!0),buttonView:N.a.stringToBoolean(this.$el.attr("data-button-view"),!1),showLabels:N.a.stringToBoolean(this.$el.attr("data-show-labels"),!1),showCounters:N.a.stringToBoolean(this.$el.attr("data-show-counters"),!0),enableMobile:O.e,url:this.$el.attr("data-url")||Object(D.m)(window.location.href),path:this.$el.attr("data-path")||F.a.current.page.get("path")||window.location.pathname,uid:this.$el.attr("data-unique_id")}),this.views=[],this.sectionId="mobileModal"===this.options.style?this.options.sectionId:F.a.current.page.get("section_id"),this.contentId="mobileModal"===this.options.style?this.options.contentId:F.a.current.page.get("id"),this.collection=this.options.collection||new B,e.page_id?(this.page=new J.a(V.vuexStore.getInstance().getters[A.nc]({uuid:Object(se.f)(e.page_id)})),this.sectionId=this.page.get("section_id"),this.contentId=this.page.get("id"),this.options.path=this.page.get("path"),this.onFetchPage()):"mobileModal"!==this.options.style?this.fetchPage().then(this.onFetchPage.bind(this)):this.onFetchPage(),this.listenTo(F.a.events,"page:cleanup",this.remove.bind(this)),this.listenTo(F.a.events,"/user/login/success",this.prefetchShares),this.listenTo(F.a.events,"/user/logout",this.prefetchShares)},prefetchShares:function(){T.default.chain(this.collection.models).filter((function(e){return"all"!==e.get("service")})).each((function(e){return e.prefetchShare()})).value()},hideCounts:function(){this.options.showTotal=this.options.showCounters=!1,this.$el.attr({"data-show-total":!1,"data-show-counters":!1}),this.hasRendered&&(T.default.each(this.collection.models,(function(e){return e.trigger("sharebar-remove",e)})),this.render())},render:function(){var e=this;this.hasRendered=!0;var t={totalShares:this.model.get("count"),style:this.options.style,showTotal:this.showTotal,enableMobile:this.options.enableMobile};if(this.collection.length>0){if(this.$el.html(this.template(t)),!0!==this.options.enableMobile&&this.options.buttonView){var n=0;this.$el.mouseover((function(){clearTimeout(n),e.$(".vf-share-dropdown").css("display","block"),e.sharebarOrientation(e.options.showTotal)})).mouseleave((function(){n=setTimeout((function(){e.$(".vf-share-dropdown").css("display","none")}),250)}))}this.renderNetworks({style:"mobileModal"===this.options.style?"mobileModal":void 0,target:this.$("ul")}),this.setupSharebar(),this.modifyAttributes(),!0===this.options.enableMobile&&this.enableMobileView(),(this.options.showTotal||"mobileModal"===this.options.style)&&(this.rollCounters={count:{el:".total",prop:"count"}},this.initializeAnimation())}return this},getNetworks:function(){var e=!0===this.options.enableMobile?"sharebar_networks_mobile":"sharebar_networks_desktop";return(this.domainSettings.get(e)||[]).concat("all")},createNetworks:function(e){for(var t=(e=T.default.defaults({},e,this.options)).networks||this.getNetworks(),n=[],i=this.options.shareCurrentPageUrl?Object(D.c)(window.location.href,{queryParams:{__vfz:"medium=sharebar"}}):Object(D.b)(e.protocol,e.domain,{path:this.options.path,queryParams:{__vfz:"medium=sharebar"}}),a=0;a<t.length;a++){var o=new H({service:t[a],dropdown:e.buttonView,section_uuid:N.a.toUuid(this.sectionId),page_uuid:N.a.toUuid(this.contentId),content_uuid:N.a.toUuid(this.contentId),content_type:"page",shared_url:i});n.push(o)}return n},getProtocol:function(){if(M.a.customWhitelist.indexOf(location.host)<0)return window.location.protocol;var e=this.domainSettings.get("sharebar_protocol");return e||"http:"},renderNetworks:function(e){var t=this;this.views=[],T.default.defaults(e,{enableMobile:this.options.enableMobile}),T.default.chain(this.collection.models).filter((function(e){return"all"!==e.get("service")})).each((function(n){var i=T.default.clone(e);i.model=n,i=t.renderNetwork(i),i=t.addNetwork(i)}))},renderNetwork:function(e){var t=new ne({page:this.page||F.a.current.page,model:e.model,style:e.style,enableMobile:e.enableMobile,showCounters:this.options.showCounters}).render();return T.default.extend({view:t},e)},addNetwork:function(e){return this.views.push(e.view),e.target.append(e.view.$el),e},setupSharebar:function(){var e=this.$(".vf-share-bar"),t=this.$el.attr("class");e.attr({"data-show-total":this.options.showTotal,"data-show-counters":this.options.showCounters,"data-button-view":this.options.buttonView,"data-show-labels":this.options.showLabels,class:t}),this.$el.addClass("vf-widget"),e.addClass("vf-share-bar"),this.options.showTotal&&!this.options.buttonView&&this.$("ul").append(Object(j.a)("total_count")({totalShares:this.model.get("count")}));var n=this.$el.find(".vf-share-button");n.length>0&&(t&&!t.match(/vf-share-button-/g)&&(t=t.replace("bar","button")),n.attr({class:t,"data-show-total":this.options.showTotal}),n.addClass("vf-share-button"))},applyDefaultIcons:function(e){return!e.hasClass("vf-share-bar-default")&&!e.hasClass("vf-share-bar-circle")&&!e.hasClass("vf-share-bar-square")},sharebarOrientation:function(e){T.default.each(this.collection.models,(function(e){return e.trigger("dropdown:open",e)}));var t=this.$el.offset().left,n=this.$(".vf-share-dropdown"),i=n.width();if(t>=L()(window).width()/2&&t+i>L()(window).width())if(n.css("text-align","right"),e){var a=this.$("div.vf-total-share-count"),o=null===a.width()?0:a.width();n.css("right","".concat(o,"px"))}else n.css("right","0px");else n.css("text-align","left"),n.css("right","")},modifyAttributes:function(){var e=this.$el.find(".vf-share-bar")||this.$el;"mobileModal"!==this.options.style&&this.applyDefaultIcons(e)&&e.addClass("vf-share-bar-default"),e.hasClass("vf-share-bar-vertical")||(e.removeAttr("data-show-labels"),O.e||this.options.buttonView||e.width(e[0].getBoundingClientRect().width)),this.options.buttonView&&e.attr("data-show-total","false")},realtimeUpdate:function(e){this.isSelf(e,this.currentUser)||(this.model.set("count",this.model.get("count")+1),this.collection.get(e.service).incrementCount())},remove:function(){T.default.each(this.views,(function(e){return e.remove()})),G.a.prototype.remove.apply(this,arguments),"mobileModal"!==this.options.style&&(this.unsubscribeRealtime(),T.default.each(this.collection.models,(function(e){return e.trigger("sharebar-remove",e)})))},enableMobileView:function(){var e=this.options.buttonView?this.$el.find(".vf-share-button"):this.$el.find(".vf-share-bar");!this.options.buttonView&&e.hasClass("vf-share-bar-vertical")||e.addClass("vf-share-bar-mobile-enabled"),O.e&&this.options.buttonView&&e.addClass("vf-disable-hover"),O.g&&this.collection.length>3&&"mobileModal"!==this.options.style&&(e.hasClass("vf-share-bar-vertical")||this.options.buttonView||e.addClass("vf-share-bar-truncate").append(Object(j.a)("sharebar_show_more")()))},openShareModal:function(e){if(e.preventDefault(),e.stopPropagation(),this.options.enableMobile){var t=L()(e.target).parent(".vf-share-button").removeClass("vf-share-bar-vertical").attr("class")||L()(e.target).closest(".vf-share-bar").removeClass("vf-share-bar-vertical").attr("class");this.initMobileModal(),R.a.trigger("/modal/generic",this.$modal,{style:"mobile",complete:this.postModalLoad}),this.$modal.$el.find("ul").addClass("vf-scrollable-menu").addClass(t.replace(/button/g,"bar")).removeClass("vf-share-bar-mobile-enabled vf-share-bar-truncate");var n=this.$modal.$el.closest(".vf-scrollable-menu-container");n.scrollTop(0);var i="hidden";n.height()<this.$modal.$el.find(".vf-scrollable-menu").height()&&(i="visible");var a=this.$modal.$el.closest(".vf-share-modal");a.find(".down").css({visibility:i}),a.find(".up").css({visibility:"hidden"});var o=n.find(".total");o.css("min-width",o[0].offsetWidth),window.chrome&&o.css("vertical-align","-0.1em")}},initMobileModal:function(){return this.$modal instanceof ce||(this.$modal=new ce({model:this.model,style:"mobileModal",showTotal:!1,showLabels:!0,buttonView:!1,showCounters:this.options.showCounters,enableMobile:this.options.enableMobile,sectionId:this.sectionId,contentId:this.contentId,collection:this.collection})),this.$modal},postModalLoad:function(){this.$modal.$("input").select(),this.initScrollMenu(this.$modal.$el.closest(".vf-scrollable-menu-container")),this.$modal.addCountListener()},addCountListener:function(){this.$("h4").attr("title",P.a.getInstance().translate("share_count",this.model.get("count"))),this.listenTo(this.model,"change:count",(function(){this.simpleUpdate("count"),this.$("h4").attr("title",P.a.getInstance().translate("share_count",this.model.get("count"))),this.$(".vf-total-share-label .label").html(P.a.getInstance().translate("share_s",this.model.get("count")).toString())}))},fetchPage:function(){var e=this,t=null;return this.options.url!==Object(D.m)(window.location.href)?t=Object(re.c)({url:this.options.url}):this.options.path!==this.currentPage.get("path")&&(t=Object(re.c)({path:this.options.path})),t?t.then((function(t){t=t||{},e.sectionId=t.section_id,e.contentId=t.id})):Promise.resolve()},onFetchPage:function(){var e=this;this.collection.add(this.createNetworks({domain:F.a.locations.domain,protocol:this.getProtocol()})),this.model=this.model||this.collection.get("all"),(this.options.showCounters||this.options.showTotal||"mobileModal"===this.options.style)&&this.collection.fetchNumShares({section_uuid:N.a.toUuid(this.sectionId),content_uuid:N.a.toUuid(this.contentId)}),"mobileModal"!==this.options.style&&(this.render(),this.initRealtime(),this.options.showTotal&&this.addCountListener()),T.default.each(this.collection.models,(function(t){e.listenTo(t,"network:share",(function(t){"mobileModal"!==e.options.style&&(e.model.set("count",e.model.get("count")+1),$.a.Events.trigger("network:share",e,t)),"mobileModal"===e.options.style&&"link"!==t&&(e.$('[data-network="link"] .vf-share-icon').css("background","#f3a63f"),e.$('[data-network="link"] .vf-share-count').css("color","#838383"))}))})),this.listenTo($.a.Events,"network:share",(function(t,n){if(e!==t&&!e.notSamePathAs(t)&&e.model!==t.model){e.model.set("count",e.model.get("count")+1);var i=e.collection.get(n);i&&i.incrementCount()}})),this.$el.mousedown((function(){e.$(".vf-share-bar").attr("data-show-outlines","false")})),L()(document).keydown((function(t){9===t.keyCode&&e.$(".vf-share-bar").attr("data-show-outlines","true")})),oe.a.getInstance().$publish(le.x.CHANNEL,le.x.EVENTS.LOADED,this.$el[0]),R.a.trigger("onWidgetLoad",this.$el[0],"onSharebarLoad")},notSamePathAs:function(e){return this.options.path&&e.options.path&&this.options.path!==e.options.path}});var ue=G.a.extend({templateName:"share_total",mixins:[te.a,ie.a],rollerFormatter:N.a.shortenCounts,realtimeFilters:function(){var e,t,n,i="".concat(N.a.toUuid(this.contentId),":page.share");return e={},t=i,n={event_type:["page.share"],page_uuid:[N.a.toUuid(this.contentId)]},t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},initialize:function(e){this.model=new H({service:"all"}),this.collection=new B,this.collection.add(this.model),this.rollCounters={count:{el:"span",prop:"count"}};var t=V.vuexStore.getInstance();e.page_id?this.collection.page=new J.a(t.getters[A.nc]({uuid:Object(se.f)(e.page_id)})):this.collection.page=this.currentPage,this.enableRealtime=N.a.stringToBoolean(this.$el.attr("data-realtime"),!0),this.collection.page=new J.a(t.getters[A.nc]({uuid:Object(se.f)(this.collection.page.id)})),this.sectionId=this.collection.page.get("section_id"),this.contentId=this.collection.page.get("id"),this.fetchShares(),this.render(),this.enableRealtime&&this.initializeAnimation()},render:function(){this.$el.html(this.template({count:0}))},realtimeUpdate:function(){this.model.set("count",this.model.get("count")+1)},fetchShares:function(){var e=this,t={section_uuid:N.a.toUuid(this.sectionId),content_uuid:N.a.toUuid(this.contentId)},n=T.default.extend({},t);this.collection.fetchNumShares(n,{success:function(){e.enableRealtime?e.initRealtime():e.$el.find(".vf-total-shares").html(e.rollerFormatter(e.model.get("count"))),e.$publish(le.y.CHANNEL,le.y.EVENTS.LOADED,e.$el[0])}})}});t.default={Sharebar:ce,ShareTotal:ue}},450:function(e,t,n){"use strict";n(23),n(26),n(13),n(10),n(6),n(8),n(4),n(108);var i=n(430),a=n(174);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a={isSelf:function(e,t){try{if(t.isGuest()&&"1"===e.user_anonymous)return!0;if("awaiting_moderation"===e.status&&!t.isModOrAdmin())return!0;var n;switch(e.event_type){case"comment.liked":case"comment.unliked":case"comment.disliked":case"comment.undisliked":case"page.share":n="actor_uuid";break;default:n="user_uuid"}return Boolean(t&&e&&i.a.toUuid(t.id)===e[n])}catch(e){return!1}},initRealtime:function(){a.c.rtBind.call(this,this.realtimeUpdate.bind(this)),this.subscribeRealtime()},subscribeRealtime:function(){var e=this,t=this.realtimeFilters();return Object.entries(t).map((function(e){var t=o(e,2);return{filter_id:t[0],filter:t[1]}})).reduce((function(t,n){var i=n.filter_id,o=n.filter;return t.then(a.c.rtSubscribe.bind(e,o,i))}),Promise.resolve())},unsubscribeRealtime:function(){a.c.rtUnsubscribe.call(this)}}},482:function(e,t,n){"use strict";n(87),n(6),n(8),n(63),n(23),n(4);var i=function(e){return e.toString(10)},a={initializeAnimation:function(){var e=this;this.rollerFormatter||(this.rollerFormatter=i),Object.values(this.rollCounters).forEach((function(t){t.$elCounter=e.$el.find(t.el),e.stopListening(e.model,"change:".concat(t.prop)),e.listenTo(e.model,"change:".concat(t.prop),e.simpleUpdate.bind(e,t.prop))}))},simpleUpdate:function(e){this.rollCounters[e].$elCounter.html(this.model.get(e))}};t.a=a},618:function(e,t,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(1)),s=l(n(3)),r=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===i(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,r.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),t}(s.default);function u(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=c},function(e,t,n){"use strict";var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),r=(i=s)&&i.__esModule?i:{default:i},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=l},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),a=document.createRange();a.selectNodeContents(e),i.removeAllRanges(),i.addRange(a),t=i.toString()}return t}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function a(){i.off(e,a),t.apply(n,arguments)}return a._=t,this.on(e,a,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,a=n.length;i<a;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],a=[];if(i&&t)for(var o=0,s=i.length;o<s;o++)i[o].fn!==t&&i[o].fn._!==t&&a.push(i[o]);return a.length?n[e]=a:delete n[e],this}},e.exports=n},function(e,t,n){var i=n(5),a=n(6);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(i.string(e))return function(e,t,n){return a(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=n(7);function a(e,t,n,i,a){var s=o.apply(this,arguments);return e.addEventListener(n,s,a),{destroy:function(){e.removeEventListener(n,s,a)}}}function o(e,t,n,a){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&a.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?a.apply(null,arguments):"function"==typeof n?a.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return a(e,t,n,i,o)})))}},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])},e.exports=i()},688:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(4);var i=n(20),a=n(0),o=n(5),s=n(48),r={load:function(e,t,n){var i=this;Promise.resolve(o.vuexStore.getInstance().getters[a.Dc]).then((function(a){(n||a.enable_recaptcha)&&(i.callback=function(e){window.grecaptcha.reset(i.clientId),t(e)},i.getRecaptcha().then(i.render.bind(i,e)))}))},execute:function(){window.grecaptcha.execute(this.clientId)},getRecaptcha:function(){return new Promise((function(e){return window.grecaptcha?e(window.grecaptcha):Object(s.c)("https://www.google.com/recaptcha/api.js?render=explicit").then(l).then(e)}))},render:function(e){var t=o.vuexStore.getInstance().getters[a.Dc].recaptcha_site_key||i.a.recaptcha_site_key;this.clientId=window.grecaptcha.render(e,{sitekey:t,callback:this.callback,size:"invisible",badge:"inline"})}};function l(){return new Promise((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if((t-=50)<=0)return e();if(window.grecaptcha)return window.grecaptcha.ready(e);return setTimeout((function(){return l()}),50)}(e)}))}}}]);