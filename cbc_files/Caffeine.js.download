// CBC Caffeine Player
// version 17.3.0
// built on Tuesday, March 10th, 2020, 10:16:08 AM
if(!CBC)var CBC={};CBC.APP||(CBC.APP={});CBC.APP.CaffeineEventDispatcher||(CBC.APP.CaffeineEventDispatcher=function(a){var i={};this.on=function(e,t,n){if(void 0===e)throw new Error("Cannot listen for undefined event");i[e]||(i[e]=[]);var r=!0===n?"unshift":"push";i[e][r](t)};this.off=function(e,n){if(void 0===e)throw new Error("Cannot remove a listener of an undefined event");var t=i[e];if(t){var r=t.reduce(function(e,t){t!==n&&e.push(t);return e},[]);i[e]=r}};this.trigger=function(e,t){if(void 0===e)throw new Error("Cannot trigger undefined event");if(i[e])for(var n=i[e].slice(0),r=0;r<n.length;r++)try{n[r].call(a||CBC.APP.Caffeine,t)}catch(e){window.console.error(e)}}});CBC.APP.Caffeine||(CBC.APP.Caffeine=function(){"use strict";var n,i=0,t=0,r=!1,a={},s=new CBC.APP.CaffeineEventDispatcher,o={},c={},f=[],e=l(),u=[e+"/i/caffeine/js/libs/underscore-min.js",e+"/i/caffeine/js/Caffeine.modules.js",e+"/i/caffeine/css/caffeine.css",e+"/i/caffeine/html/includes/settings_local.json"];function l(){for(var e="",t=document.querySelectorAll('script[src*="Caffeine.js"]'),n=0;n<t.length;n++){var r=t[n].getAttribute("src");-1<r.indexOf("/i/caffeine/")&&(e=r.split("/i/caffeine/")[0])}return e}function d(e){var t=e.url.split("?")[0];switch(t=t.split(".").pop().toLowerCase()){case"json":!function(r){CBC.APP.Caffeine.getXhr(r,function(e){var t=JSON.parse(this.responseText);o.SETTINGS={};for(var n in t)t.hasOwnProperty(n)&&a(n,t[n]);v(r)},b);function a(e,t){Object.defineProperty(o.SETTINGS,e,{get:function(){return t}})}}(e.url);break;case"css":!function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("href",e);t.setAttribute("type","text/css");t.setAttribute("media","screen");document.getElementsByTagName("head")[0].appendChild(t);v(e)}(e.url);break;case"js":!function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("src",e);t.onload=function(){v(e)};t.onerror=function(){b(e)};document.getElementsByTagName("head")[0].appendChild(t)}(e.url)}}function C(e,t){r||function(){CBC.APP.Caffeine._=window._.noConflict();n=CBC.APP.Caffeine.Helpers.Event;s.on(n.CAFFEINE_INSTANCEDESTROYED,g);r=!0;CBC.APP.Caffeine._.defer(s.trigger,n.CAFFEINE_READY)}();if(Object.keys(t).length){CBC.APP.Caffeine.getModule("Core.Instance").call(t,e);a[t.session.config.ciid]=t}}function h(e){if(!e)return null;var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;p(e,t);return t}function p(e,t){n=new RegExp(e+"=.*?(;|$|\\s)","g"),document.cookie=document.cookie.replace(n,"");var n,r=e+"="+t+"; max-age=1296000;path=/";document.cookie=r}function g(e){delete a[e]}function v(e){for(var t=0;t<f.length;t++)if(f[t].url===e){f[t].status=!0;for(var n=0;n<f[t].successCallbacks.length;n++)f[t].successCallbacks[n]();break}}function b(e){for(var t=0;t<f.length;t++)if(f[t].url===e){f[t].status=!0;for(var n=0;n<f[t].errorCallbacks.length;n++)f[t].errorCallbacks[n]();break}}function P(){for(var e=t=0;e<f.length;e++)f[e]&&!0===f[e].status&&t++;t===i&&s.trigger("caffeineDependenciesLoaded")}function k(e,t,n){this.status=!1;this.url=e;this.successCallbacks=[];this.errorCallbacks=[];this.addSuccessCallback=function(e){"function"==typeof e&&this.successCallbacks.push(e)};this.addErrorCallback=function(e){"function"==typeof e&&this.errorCallbacks.push(e)};this.addSuccessCallback(t);this.addErrorCallback(n)}function A(e,t,n){for(var r,a=0;a<f.length;a++)if(f[a].url===e){r=f[a];break}if(!r||!0!==r.status)if(r&&!1===r.status){r.successCallbacks.push(t);r.errorCallbacks.push(n)}else{r=new k(e,t,n);f.push(r);i++;d(r)}}return{getSettings:function(){return o.SETTINGS},get volume(){var e=parseFloat(h("avcaff_volume"));return isNaN(e)?1:e},set volume(e){CBC.APP.Caffeine.volume!==(e=parseFloat(e))&&p("avcaff_volume",e)},get captions(){return!0===JSON.parse(h("avcaff_captions"))},set captions(e){p("avcaff_captions",!0===JSON.parse(e))},get autoDockDisabled(){return!0===JSON.parse(h("avcaff_autodockdisable"))},set autoDockDisabled(e){p("avcaff_autodockdisable",!0===JSON.parse(e))},get version(){return"17.3.0"},get baseUrl(){return l()},on:s.on,off:s.off,trigger:s.trigger,initInstance:function(e){var t=function(){var e,t={get on(){return e.on},get off(){return e.off},get trigger(){return e.trigger},destroy:function(){for(var e in this)delete this[e]}};e=new CBC.APP.CaffeineEventDispatcher(t);return t}();if(r)C(e,t);else{var n="pending"+Object.keys(a).length;a[n]=t;s.on("caffeineDependenciesLoaded",function(){C(e,t);delete a[n]});!function(){for(;0<u.length;)A(u.pop(),P,P)}()}return t},getInstance:function(e){return void 0===e?a:a[e]},pauseAll:function(){for(var e in a)a.hasOwnProperty(e)&&a[e].pause()},destroyAll:function(){for(var e in a)a.hasOwnProperty(e)&&a[e].destroy()},getXhr:function(r,a,i,e){var s=new XMLHttpRequest;s.open("get",r,!0);!0===e&&(s.withCredentials=!0);s.onreadystatechange=function(e){if(4===this.readyState){s.onreadystatechange=null;t=r,200===(n=this).status||201===n.status||0===n.status&&"file:///"===t.substring(0,8)&&""!==n.responseText?void 0!==a&&a.call(s,r):void 0!==i&&i.call(s,r);var t,n}};s.send()},addDependency:A,addModule:function(e,t,n){c[e]=t;if(n){e=e.split(".");for(var r=CBC.APP.Caffeine,a=0;a<e.length;a++){r[e[a]]||(a<e.length-1?r[e[a]]={}:r[e[a]]=t);r=r[e[a]]}}},getModule:function(e){return c[e]}}}());
//# sourceMappingURL=Caffeine.js.map